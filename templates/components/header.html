{% load static %}
<header class="bg-[#669ACC] sticky top-0" id="main-header">
    <nav class="px-10" id="main-nav">
        <div class="p-3 flex justify-between items-center relative">
            <a href="{% url 'core:home' %}" class="sticky top-0">
                <span>Social robotics logo</span>
            </a>
            <div class=" md:hidden flex flex-row gap-3 sticky ">
                <button><img src="{% static 'img/search-icon.png' %}" alt="" class="size-5" id="search-button"></button>
                <!-- menu button in mobile view -->
                <button id="menu-toggle" class=" text-white focus:outline-none z-20">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                        class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>

            <div class="hidden md:flex gap-10 items-center justify-center">
                <!-- search bar -->
                <div>
                    <form action="{% url 'core:search' %}" method="get"
                        class="md:flex flex-row border rounded-2xl items-center gap-2 pl-2 hidden"
                        id="search-form">
                        
                        <input type="text" name="q" required
                            class="appearance-none bg-custom-lightBlue text-white focus:outline-none focus:shadow-outline placeholder:text-white"
                            placeholder="Type to search ...">
                        <button type="submit"
                            class="bg-custom-navyBlue text-white p-2 rounded-e-2xl border-none hover:bg-blue-900 hover:transform duration-300">
                            <img src="{% static 'img/search-icon.png' %}" alt="" class="size-5">
                        </button>
                    </form>
                </div>
            </div>
        </div>
        <div class="border-b"></div>
        <div class="p-2 relative">
            <ul id="navbar-items"
                class="hidden py-2 md:flex md:items-center md:justify-center gap-6 md:gap-12 text-white opacity-90 md:opacity-1 duration-300  absolute top-0 left-0 right-0 bg-custom-navyBlue z-10 md:relative md:bg-transparent">
                <li>
                    <a href="{% url 'core:home' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/' %}text-custom-lightGray  font-bold{% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        Home
                    </a>
                </li>
                <li>
                    <a href="{% url 'core:about' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/about/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        About
                    </a>
                </li>
                <li>
                    <a href="{% url 'people:list' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/team/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        Team
                    </a>
                </li>
                <li>
                    <a href="{% url 'news:list' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/news/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        News
                    </a>
                </li>
                <li>
                    <a href="{% url 'projects:list' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/projects/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        Projects
                    </a>
                </li>
                <li>
                    <a href="{% url 'outreach:list' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/outreach/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        Outreach
                    </a>
                </li>
                <li>
                    <a href="{% url 'publications:list' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/publications/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        Publications
                    </a>
                </li>
                <li>
                    <a href="{% url 'responsible_computing:responsible_computing' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/responsible_computing/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        Responsible Computing
                    </a>
                </li>
                <li>
                    <a href="{% url 'robots:list' %}"
                        class="relative inline-block pb-1 text-lg {% if request.path == '/robots/' %}text-custom-lightGray font-bold {% endif %} after:content-[''] after:absolute after:w-0 after:h-0.5 after:bg-custom-navyBlue after:right-0 after:bottom-0 after:transition-width after:duration-400 hover:after:w-full hover:after:left-0 transform hover:-translate-y-1 transition-transform">
                        Robots
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<style>
    @keyframes fadeIn {
        to {
            opacity: 1;
        }
    }

    .animate-fadeIn {
        opacity: 0;
        animation: fadeIn 1s forwards;
    }
</style>
<script>
    let lastScrollTop = 0;
    let isScrolling;
    const header = document.getElementById("main-header");

    window.addEventListener("scroll", function () {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop > lastScrollTop) {
            header.classList.add("hide");
        } else {
            header.classList.remove("hide");
        }

        clearTimeout(isScrolling);

        isScrolling = setTimeout(function () {
            header.classList.remove("hide");
        }, 100);

        lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    });

    <!-- toggle the menu bar in mobile view -->
    document.getElementById('menu-toggle').addEventListener('click', function () {
        const navbarItems = document.getElementById('navbar-items');
        if (navbarItems.classList.contains('hidden')) {
            navbarItems.classList.remove('hidden');
            navbarItems.classList.add('flex', 'flex-col', 'items-center', 'gap-4');
        } else {
            navbarItems.classList.add('hidden');
            navbarItems.classList.remove('flex', 'flex-col', 'items-center', 'gap-4');
        }
    });
    document.getElementById('search-button').addEventListener('click', function () {
        const searchForm = document.getElementById('search-form');
        if (searchForm.classList.contains('hidden')) {
            searchForm.classList.remove('hidden');
            searchForm.classList.add('flex' ,'items-center', 'gap-4');
        } else {
            searchForm.classList.add('hidden');
        }
    });
</script>